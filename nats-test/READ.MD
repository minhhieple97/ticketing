trong nats-streaming-server có một khái niệm được gọi là queueGroup

- Vấn đề xảy ra khi chúng ta muốn scale một hệ thống lên trong trường hợp chọn cách nhân bản một service thành nhiều service giúp có thể handle được nhiều request hơn phát sinh vấn đề đó là Nats sẽ gửi các message đến tất cả các service này (do các service này giống hệt nhau nên chúng lắng nghe chung 1 channel) => giải quyết vấn đề này bằng QueueGroup => khi cách service đã cùng subcribe vào 1 channel => chúng ta có thể join chúng vào cùng một QueueGroup => Nats sẽ lựa chọn ngẫu nhiên các Service trong QueueGroup để gửi message => Khắc phục được vấn đề trùng lặp dữ liệu giữa các service giống hệt nhau => Nếu chúng ta không join nó vào QueueGroup thì mặc định các service subcribe chung một chanel sẽ cùng nhận được một message của channel đó.

<!-- Xác nhận việc gửi message có thành công hay không của Nats-streaming-server -->

Theo cấu hình mặc định, khi Nats-server gửi message và stan(client) nhận được nó thì Nats sẽ coi message đó đã được gửi thành công nhưng vấn đề phát sinh khi client xử lý message đó bị lỗi (ví dụ trong trường hợp client không connect được tới database) cần rollback ngược lại thì phải làm sao ? để khác phục vấn đề này Nats cung cấp một loại cấu hình giúp dev xác định rõ ràng thời điểm message được xử lý thành công đó là cấu hình setManualAckMode, với cấu hình này khi nào client gọi hàm .ack() thì Nats mới coi message đó được nhận thành công nếu client không gọi thì Nats sẽ điều hướng message đó sang các client khác cùng listen channel sau mỗi 30s, nếu không có client nào thì Nats sẽ liên tục gửi message sau mỗi 30s.
